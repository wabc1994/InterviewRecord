# SQL语句常见问题
on 条件是返回left join 左边中的所有记录的，然后右边的当中的不匹配的话，那么直接返回null 空值，然后在使用where 对中间结果进一步进行一个选择
 - [on 和where条件的放置详解](https://blog.csdn.net/itguangit/article/details/83011781)
 
 
# For update语句的基本关系 

for update 加锁代表的是**排他锁**，如果事务T对数据A加上排他锁后，则其他事务不能再对A加任任何类型的封锁。获准排他锁的事务既能读数据，又能修改数据。


这里的排他锁包括行锁和表锁两种情况，并且也分为有没有查询到结果以及是使用主键还是非主键的问题

排他锁的申请前提：没有线程对该结果集中的任何行数据使用排他锁或共享锁，否则申请会阻塞。

for update仅适用于InnoDB，且必须在事务块(BEGIN/COMMIT)中才能生效。在进行事务操作时，通过“for update”语句，**MySQL会对查询结果集中每行数据都添加排他锁**，其他线程对该记录的更新与删除操作都会阻塞。排他锁包含行锁、表锁。

使用在一个事务当中，假设一个事务A使用select出来的结果进行加锁操作，行锁或者表锁，其他并发事务要想对数据库进行一定

修改更新操作需要等待事务A commit之后才能进行，是一种悲观锁的思想吧


在查询语句后面增加FOR UPDATE，Mysql会对查询结果中的每行都加排他锁，当没有其他线程对查询结果集中的任何一行使用排他锁时，可以成功申请排他锁，否则会被阻塞。


[mysql悲观锁总结和实践](https://chenzhou123520.iteye.com/blog/1860954)


 